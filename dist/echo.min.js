/*! echo-js v1.7.3 | (c) 2015 @toddmotto | https://github.com/toddmotto/echo */
!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,n,r,o,c,a={},u=function(){},l=function(t){return null===t.offsetParent},d=function(t,e){if(l(t))return!1;var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},i=function(){(o||!n)&&(clearTimeout(n),n=setTimeout(function(){a.render(),n=null},r))};return a.init=function(n){n=n||{};var l=n.offset||0,d=n.offsetVertical||l,s=n.offsetHorizontal||l,f=function(t,e){return parseInt(t||e,10)};e={t:f(n.offsetTop,d),b:f(n.offsetBottom,d),l:f(n.offsetLeft,s),r:f(n.offsetRight,s)},r=f(n.throttle,250),o=n.debounce!==!1,c=!!n.unload,u=n.callback||u,a.render(),document.addEventListener?(t.addEventListener("scroll",i,!1),t.addEventListener("load",i,!1)):(t.attachEvent("onscroll",i),t.attachEvent("onload",i))},a.render=function(){for(var n,r,o=document.querySelectorAll("[data-src]"),l=o.length,i={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},s=0;l>s;s++)r=o[s],d(r,i)?(c&&r.setAttribute("data-src-placeholder",r.src),null!==r.getAttribute("data-src-background")?r.style.backgroundImage="url("+r.getAttribute("data-src-background")+")":r.src=r.getAttribute("data-src"),c||(r.removeAttribute("data-src"),r.removeAttribute("data-src-background")),u(r,"load")):c&&(n=r.getAttribute("data-src-placeholder"))&&(null!==r.getAttribute("data-src-background")?r.style.backgroundImage="url("+n+")":r.src=n,r.removeAttribute("data-src-placeholder"),u(r,"unload"));l||a.detach()},a.detach=function(){document.removeEventListener?t.removeEventListener("scroll",i):t.detachEvent("onscroll",i),clearTimeout(n)},a});