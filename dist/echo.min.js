/*! echo-js v1.7.3 | (c) 2015 @toddmotto | https://github.com/toddmotto/echo */
!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,r,n,o,c,a={},u=function(){},i=function(t){return null===t.offsetParent},d=function(t,e){if(i(t))return!1;var r=t.getBoundingClientRect();return r.right>=e.l&&r.bottom>=e.t&&r.left<=e.r&&r.top<=e.b},l=function(){(o||!r)&&(clearTimeout(r),r=setTimeout(function(){a.render(),r=null},n))};return a.init=function(r){r=r||{};var i=r.offset||0,d=r.offsetVertical||i,s=r.offsetHorizontal||i,f=function(t,e){return parseInt(t||e,10)};e={t:f(r.offsetTop,d),b:f(r.offsetBottom,d),l:f(r.offsetLeft,s),r:f(r.offsetRight,s)},n=f(r.throttle,250),o=r.debounce!==!1,c=!!r.unload,u=r.callback||u,a.render(),document.addEventListener?(t.addEventListener("scroll",l,!1),t.addEventListener("load",l,!1)):(t.attachEvent("onscroll",l),t.attachEvent("onload",l))},a.render=function(){for(var r,n,o=document.querySelectorAll("img[data-src], iframe[data-src]"),i=o.length,l={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},s=0;i>s;s++)n=o[s],d(n,l)?(c&&n.setAttribute("data-src-placeholder",n.src),null!==n.getAttribute("data-src-background")?n.style.backgroundImage="url("+n.getAttribute("data-src-background")+")":n.src=n.getAttribute("data-src"),c||(n.removeAttribute("data-src"),n.removeAttribute("data-src-background")),u(n,"load")):c&&(r=n.getAttribute("data-src-placeholder"))&&(null!==n.getAttribute("data-src-background")?n.style.backgroundImage="url("+r+")":n.src=r,n.removeAttribute("data-src-placeholder"),u(n,"unload"));i||a.detach()},a.detach=function(){document.removeEventListener?t.removeEventListener("scroll",l):t.detachEvent("onscroll",l),clearTimeout(r)},a});